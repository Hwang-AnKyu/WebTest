{% extends 'base.html' %}

{% block title %}Profile - AICOM{% endblock %}

{% block content %}
<div class="space-y-8 max-w-4xl mx-auto">
    <!-- Profile Header -->
    <div class="flex items-center gap-6">
        <div class="h-20 w-20 rounded-full bg-muted flex items-center justify-center text-2xl font-bold text-muted-foreground">
            {{ user.username[0] | upper }}
        </div>
        <div class="space-y-1">
            <h1 class="text-2xl font-bold">{{ user.username }}</h1>
            <p class="text-muted-foreground">{{ user.email }}</p>
            {% if user.is_admin %}
            <span class="inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold border-transparent bg-primary text-primary-foreground">
                Admin
            </span>
            {% endif %}
        </div>
    </div>

    <!-- Profile Stats -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
        <div class="border rounded-lg p-4">
            <p class="text-sm text-muted-foreground">Member Since</p>
            <p class="text-2xl font-semibold">{{ user.created_at[:10] }}</p>
        </div>
        <div class="border rounded-lg p-4">
            <p class="text-sm text-muted-foreground">Bookmarks</p>
            <p class="text-2xl font-semibold">{{ bookmark_count }}</p>
        </div>
        <div class="border rounded-lg p-4">
            <p class="text-sm text-muted-foreground">Role</p>
            <p class="text-2xl font-semibold">{{ 'Admin' if user.is_admin else 'Member' }}</p>
        </div>
    </div>

    <!-- Recent Bookmarks -->
    <div class="space-y-4">
        <div class="flex items-center justify-between">
            <h2 class="text-xl font-semibold">Recent Bookmarks</h2>
            {% if bookmark_count > 5 %}
            <a
                href="/profile/bookmarks"
                hx-get="/profile/bookmarks"
                hx-target="body"
                hx-push-url="true"
                class="text-sm text-muted-foreground hover:text-foreground"
            >
                View all
            </a>
            {% endif %}
        </div>

        {% if bookmarks %}
        <div class="border rounded-lg divide-y">
            {% for bookmark in bookmarks %}
            <a
                href="/posts/{{ bookmark.post.id }}"
                hx-get="/posts/{{ bookmark.post.id }}"
                hx-target="body"
                hx-push-url="true"
                class="block p-4 hover:bg-muted/50 transition-colors"
            >
                <div class="font-medium">{{ bookmark.post.title }}</div>
                <div class="text-sm text-muted-foreground">
                    {{ bookmark.post.author.username if bookmark.post.author else 'Unknown' }} &middot;
                    {{ bookmark.created_at[:10] }}
                </div>
            </a>
            {% endfor %}
        </div>
        {% else %}
        <div class="text-center py-8 text-muted-foreground border rounded-lg">
            <p>No bookmarks yet.</p>
            <p class="text-sm">Bookmark posts to find them easily later.</p>
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}
