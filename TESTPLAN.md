# AICOM 테스트 계획

## 테스트 전략
- 테스트 레벨별로 각각 테스트
  1. **단위 테스트**: 개별 함수 및 메서드 (pytest)
  2. **통합 테스트**: API 엔드포인트 (TestClient)
  3. **E2E 테스트**: 전체 사용자 시나리오

## 테스트 환경
- **로컬**: Python pytest + Docker Compose
- **E2E**: Puppeteer MCP
- **데이터베이스**: 실제 Supabase 환경 (.env)

## 테스트 실행
```bash
# 단위 테스트 실행
pytest tests/ -v

# 특정 테스트 파일 실행
pytest tests/test_auth.py -v

# Docker 환경에서 앱 실행 후 E2E 테스트
docker compose up --build -d
```

## 기능별 테스트 케이스

### 인증 (Phase 2) - 완료 ✅
#### 회원가입
- [x] 정상적인 회원가입 성공
- [x] 중복 이메일로 회원가입 시도
- [x] 중복 사용자명으로 회원가입 시도
- [x] 잘못된 이메일 형식
- [x] 짧은 비밀번호 (8자 미만)
- [x] 비밀번호 문자 없음 검증
- [x] 비밀번호 숫자 없음 검증

#### 로그인
- [x] 정상적인 로그인 성공
- [x] 존재하지 않는 이메일로 로그인
- [x] 잘못된 비밀번호로 로그인

#### JWT 토큰
- [x] JWT 토큰 생성
- [x] JWT 토큰 만료
- [x] 유효한 토큰으로 보호된 라우트 접근
- [x] 토큰 없이 보호된 라우트 접근

#### 로그아웃
- [x] 정상적인 로그아웃
- [x] 로그인하지 않은 상태에서 로그아웃

#### CSRF 보호
- [x] CSRF 토큰 생성
- [x] CSRF 토큰과 함께 POST 요청
- [x] 잘못된 CSRF 토큰으로 요청 실패

### 게시판 관리 (Phase 3) - 완료 ✅
#### 게시판 목록
- [x] 전체 게시판 목록 조회
- [x] 비활성 게시판 필터링

#### 게시판 상세
- [x] 게시판 정보와 게시글 목록 조회
- [x] 페이지네이션 동작
- [x] 사용자 권한별 글쓰기 버튼 표시

#### 관리자 게시판 관리
- [x] 게시판 생성 (관리자만)
- [x] 게시판 수정 (관리자만)
- [x] 게시판 삭제 (관리자만)
- [x] 비관리자 접근 제한

### 게시글 기능 (Phase 4) - 완료 ✅
#### 게시글 작성
- [x] 권한 있는 사용자의 게시글 작성
- [x] 권한 없는 사용자의 작성 실패
- [x] 1MB 초과 콘텐츠 제한
- [x] 필수 필드 검증

#### 게시글 조회
- [x] 게시글 상세 조회
- [x] 조회수 증가
- [x] 삭제된 게시글 접근 제한

#### 게시글 수정/삭제
- [x] 작성자의 게시글 수정/삭제
- [x] 관리자의 모든 게시글 수정/삭제
- [x] 다른 사용자의 수정/삭제 제한

#### 게시글 고정
- [x] 관리자의 게시글 고정/해제
- [x] 일반 사용자의 고정 시도 제한

### 댓글 시스템 (Phase 5) - 완료 ✅
#### 댓글 작성
- [x] 로그인 사용자의 댓글 작성
- [x] 비로그인 사용자의 댓글 작성 실패
- [x] 존재하지 않는 게시글에 댓글 작성 실패

#### 대댓글 작성
- [x] 대댓글 작성 성공
- [x] 대댓글의 대댓글 작성 실패 (3단계 방지)
- [x] 삭제된 댓글에 대댓글 작성 실패

#### 댓글 수정
- [x] 작성자의 댓글 수정
- [x] 다른 사용자의 댓글 수정 실패
- [x] 관리자의 모든 댓글 수정

#### 댓글 삭제
- [x] 작성자의 댓글 삭제
- [x] 다른 사용자의 댓글 삭제 실패
- [x] 관리자의 모든 댓글 삭제

#### 댓글 조회
- [x] 게시글의 댓글 목록 계층적 조회
- [x] 작성자 정보 포함
- [x] 삭제된 댓글 필터링
- [x] 대댓글 들여쓰기 스타일

### 검색 기능 (Phase 6) - 완료 ✅
#### 검색 유형
- [x] 전체 게시판에서 검색 (제목+내용 OR 검색)
- [x] 특정 게시판에서 검색
- [x] 제목만 검색
- [x] 내용만 검색

#### 검색 검증
- [x] 검색어 없이 요청 (422 에러)
- [x] 빈 검색어로 요청 (422 에러)
- [x] 잘못된 검색 유형 (422 에러)

#### 검색 결과
- [x] 페이지네이션 동작
- [x] 특수문자 포함 검색어 처리
- [x] 검색 결과 없음 처리
- [x] 작성자 정보 포함

### 관리자 기능 (Phase 7) - 완료 ✅
#### 사용자 관리
- [x] 관리자의 사용자 목록 조회
- [x] 일반 사용자의 사용자 목록 조회 실패
- [x] 비로그인 사용자의 사용자 목록 조회 실패
- [x] 사용자 목록 페이지네이션
- [x] 사용자 관리자 권한 변경
- [x] 사용자 관리자 권한 제거
- [x] 자기 자신의 관리자 권한 변경 실패
- [x] 존재하지 않는 사용자 권한 변경 실패

#### 게시판 관리
- [x] 관리자의 게시판 생성
- [x] 중복된 slug로 게시판 생성 실패
- [x] 일반 사용자의 게시판 생성 실패
- [x] 관리자의 게시판 수정
- [x] 존재하지 않는 게시판 수정 실패
- [x] 관리자의 게시판 삭제
- [x] 게시글이 있는 게시판 삭제 실패

### 프로필 및 북마크 (Phase 8) - 완료 ✅
#### 프로필 페이지
- [x] 프로필 페이지 렌더링
- [x] 비로그인 시 로그인 페이지 리다이렉트
- [x] 사용자 정보 표시
- [x] 북마크 수 표시
- [x] 최근 북마크 목록 표시

#### 북마크 기능
- [x] 북마크 추가
- [x] 북마크 제거
- [x] 중복 북마크 방지
- [x] 존재하지 않는 게시글 북마크 실패
- [x] 북마크 목록 페이지 렌더링
- [x] 북마크 목록 페이지네이션

### 템플릿 및 정적 파일 (Phase 9) - 완료 ✅
#### 템플릿 렌더링
- [x] 메인 페이지 렌더링
- [x] 로그인/회원가입 페이지 렌더링
- [x] 게시판 목록 페이지 렌더링
- [x] 게시글 상세 페이지 렌더링
- [x] 게시글 작성/수정 페이지 렌더링
- [x] 검색 페이지 렌더링
- [x] 관리자 페이지 렌더링
- [x] 프로필 페이지 렌더링
- [x] 북마크 페이지 렌더링

#### HTMX 통합
- [x] 페이지 전환 (hx-get, hx-target="body")
- [x] 폼 제출 (hx-post, hx-put, hx-delete)
- [x] CSRF 토큰 자동 포함
- [x] 로딩 인디케이터 표시
- [x] 댓글 CRUD 실시간 업데이트
- [x] 북마크 토글 실시간 업데이트

#### 보안
- [x] 모든 폼에 CSRF 토큰 포함
- [x] XSS 방어 (bleach)
- [x] 권한별 UI 요소 표시/숨김

#### 반응형 디자인
- [x] 모바일 레이아웃
- [x] 태블릿 레이아웃
- [x] 데스크톱 레이아웃

### Docker 및 배포 (Phase 10) - 완료 ✅
#### Docker 빌드
- [x] Dockerfile 빌드 성공
- [x] docker-compose 설정 검증
- [x] 환경 변수 마운트 확인

#### 컨테이너 실행
- [x] 프로덕션 환경 실행 (docker-compose.yml)
- [x] Health check 동작 확인
- [x] 컨테이너 간 네트워크 통신

#### Nginx 프록시
- [x] FastAPI 프록시 동작
- [x] Rate limiting 동작 (30req/min)
- [x] 인증 Rate limiting (10req/min)
- [x] 보안 헤더 설정 확인
